<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>é—ªçƒæ ‡é¢˜ç¤ºä¾‹</title>
<script>
function getQueryVariable(variable)
{
    var query = window.location.search.substring(1);
    var vars = query.split("&");
    for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if(pair[0] == variable){return pair[1];}
    }
    return(false);
}
//https://www.runoob.com/index.php?id=1&image=awesome.jpg
// è°ƒç”¨ getQueryVariable("id") è¿”å› 1ã€‚
//è°ƒç”¨ getQueryVariable("image") è¿”å› "awesome.jpg"ã€‚
//rstudioapi::viewer("../../pub/notice.html?job=abc&time=def") #æä¸ªç½‘é¡µæé†’
//alert(getQueryVariable("job") )
function sendNotification(job) { 
var options = {
    body: Date(), // é€šçŸ¥çš„æ­£æ–‡
      // é€šçŸ¥id  é€šçŸ¥çš„IDï¼Œé»˜è®¤ tag ä¸ºç©ºã€‚å½“ tag ç›¸åŒæ—¶ï¼Œé‡å¤æ„é€ å®ä¾‹ï¼Œæ–°é€šçŸ¥ä¼šæ›¿æ¢æ—§é€šçŸ¥ã€‚åä¹‹ï¼Œé€šçŸ¥ä¸ä¼šæ›¿æ¢ï¼Œè€Œæ˜¯åƒæ¥¼å±‚ä¸€æ ·å åŠ ã€‚åŒæ ·çš„ï¼Œå¿½ç•¥ tag å±æ€§ï¼Œé€šçŸ¥ä¹Ÿä¸ä¼šæ›¿æ¢ã€‚
  tag: job,
  // æ˜¯å¦ä¸€ç›´ä¿æŒæœ‰æ•ˆ  é€šçŸ¥æ˜¯å¦ä¿æŒï¼Œä¸ä¼šè‡ªåŠ¨å…³é—­ã€‚é»˜è®¤ä¸º falseï¼Œä¼šè‡ªåŠ¨å…³é—­ã€‚å½“è®¾ç½®ä¸º true æ—¶ï¼Œç”±ç”¨æˆ·æ‰‹åŠ¨å…³é—­æˆ–è°ƒç”¨å®ä¾‹çš„ close æ–¹æ³•è¿›è¡Œå…³é—­ã€‚
  requireInteraction: true
};

  var n = new Notification(`${job} finished`, options);
  n.onclick = function () {
  window.close()
}
}

job=getQueryVariable("job")
sendNotification(job)

var i=1
var timer=setInterval(function(){
	document.title="ğŸš¨ " +i;
setTimeout(function(){document.title="     " },500)
	i=i+1
},1000);
</script>
</head>
<body>
  <h1>æµè§ˆå™¨æ ‡ç­¾é—ªçƒç¤ºä¾‹</h1>
  <p>ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®å¼€å§‹æˆ–åœæ­¢æ ‡é¢˜é—ªçƒã€‚</p>
  <input type="button", onclick="clearInterval(timer)" value="stop">
</body>
</html>

